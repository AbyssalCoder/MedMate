<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MedMate - Your AI Health Companion</title>
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 30px rgba(139, 92, 246, 0.6), 0 0 60px rgba(236, 72, 153, 0.3); }
      50% { box-shadow: 0 0 50px rgba(139, 92, 246, 0.9), 0 0 100px rgba(236, 72, 153, 0.6); }
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    .float-animation { animation: float 4s ease-in-out infinite; }
    .pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }
    .slide-in { animation: slideIn 0.6s ease-out; }
    .fade-in { animation: fadeIn 0.8s ease-out; }
    .scale-in { animation: scaleIn 0.5s ease-out; }
    .bounce-animation { animation: bounce 2s ease-in-out infinite; }
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 3s linear infinite;
      background-size: 200% auto;
    }
    .shimmer-bg {
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      background-size: 200% 100%;
      animation: shimmer 2s infinite;
    }
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .glow-border {
      box-shadow: 0 0 20px rgba(139, 92, 246, 0.5), inset 0 0 20px rgba(236, 72, 153, 0.2);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-50 to-pink-100 min-h-screen font-sans antialiased overflow-x-hidden">
  <main id="app" class="min-h-screen">
    <!-- AUTH SECTION -->
    <section id="auth-section" class="min-h-screen flex items-center justify-center p-6">
      <div class="w-full max-w-md">
        <div class="text-center mb-8 fade-in">
          <!-- MedMate Logo -->
          <div class="inline-block mb-6 scale-in">
            <div class="relative">
              <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-50 pulse-glow"></div>
              <div class="relative bg-gradient-to-br from-purple-600 via-pink-500 to-rose-500 p-6 rounded-3xl shadow-2xl">
                <svg class="w-20 h-20 text-white" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <!-- Medical Cross -->
                  <rect x="42" y="20" width="16" height="60" rx="3" fill="currentColor"/>
                  <rect x="20" y="42" width="60" height="16" rx="3" fill="currentColor"/>
                  <!-- Heart Shape -->
                  <path d="M50 75C50 75 25 60 25 42C25 32 32 25 40 25C45 25 48 27 50 30C52 27 55 25 60 25C68 25 75 32 75 42C75 60 50 75 50 75Z" fill="currentColor" opacity="0.3"/>
                  <!-- Sparkle -->
                  <circle cx="75" cy="25" r="3" fill="white" class="bounce-animation"/>
                </svg>
              </div>
            </div>
          </div>
          <h1 class="text-6xl font-black gradient-text mb-4 slide-in" style="animation-delay: 0.2s;">MedMate</h1>
          <p class="text-xl text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-semibold mb-2 slide-in" style="animation-delay: 0.3s;">Your AI Health Companion üíô</p>
          <p class="text-slate-600 slide-in" style="animation-delay: 0.4s;">‚ú® Get instant medical guidance anytime, anywhere</p>
        </div>
        
        <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-8 glow-border scale-in" style="animation-delay: 0.5s;">
          <!-- Tab Switcher -->
          <div class="flex rounded-2xl bg-gradient-to-r from-purple-100 to-pink-100 p-1 mb-6">
            <button id="show-login" class="flex-1 py-3 rounded-xl bg-white shadow-lg text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 font-bold transition transform hover:scale-105">üîê Login</button>
            <button id="show-register" class="flex-1 py-3 rounded-xl text-slate-600 font-semibold transition hover:bg-white/50">‚ú® Register</button>
          </div>

          <!-- Login Form -->
          <form id="login-form" class="space-y-5">
            <div>
              <label for="login-id" class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">üë§ User ID</label>
              <input id="login-id" type="text" required placeholder="Enter your ID" class="w-full border-2 border-purple-200 rounded-xl px-4 py-3.5 text-base focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-100 transition" />
            </div>
            <div>
              <label for="login-pin" class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">üîí PIN</label>
              <input id="login-pin" type="password" required placeholder="Enter your PIN" class="w-full border-2 border-purple-200 rounded-xl px-4 py-3.5 text-base focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-100 transition" />
            </div>
            <button type="submit" class="w-full bg-gradient-to-r from-purple-600 via-pink-500 to-rose-500 hover:from-purple-700 hover:via-pink-600 hover:to-rose-600 text-white font-bold py-4 rounded-xl shadow-2xl transition transform hover:scale-105 active:scale-95 pulse-glow">
              üöÄ Login to MedMate
            </button>
          </form>

          <!-- Register Form -->
          <form id="register-form" class="space-y-5 hidden">
            <div>
              <label for="register-name" class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">‚ú® Full Name</label>
              <input id="register-name" type="text" required placeholder="Enter your name" class="w-full border-2 border-purple-200 rounded-xl px-4 py-3.5 text-base focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-100 transition" />
            </div>
            <div>
              <label for="register-id" class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">üÜî User ID</label>
              <input id="register-id" type="text" required placeholder="Choose a unique ID" class="w-full border-2 border-purple-200 rounded-xl px-4 py-3.5 text-base focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-100 transition" />
            </div>
            <div>
              <label for="register-pin" class="block text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">üîí PIN</label>
              <input id="register-pin" type="password" required placeholder="Create a PIN" minlength="4" maxlength="6" class="w-full border-2 border-purple-200 rounded-xl px-4 py-3.5 text-base focus:border-purple-500 focus:outline-none focus:ring-4 focus:ring-purple-100 transition" />
            </div>
            <button type="submit" class="w-full bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 hover:from-emerald-600 hover:via-teal-600 hover:to-cyan-600 text-white font-bold py-4 rounded-xl shadow-2xl transition transform hover:scale-105 active:scale-95">‚ú® Create Account</button>
          </form>
        </div>
      </div>
    </section>

    <!-- WORKSPACE -->
    <section id="workspace" class="hidden min-h-screen p-4 md:p-6 lg:p-8">
      <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 slide-in">
          <div class="flex items-center gap-4">
            <!-- Mini Logo -->
            <div class="bg-gradient-to-br from-purple-600 via-pink-500 to-rose-500 p-3 rounded-2xl shadow-lg pulse-glow">
              <svg class="w-8 h-8 text-white" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="42" y="20" width="16" height="60" rx="3" fill="currentColor"/>
                <rect x="20" y="42" width="60" height="16" rx="3" fill="currentColor"/>
                <path d="M50 75C50 75 25 60 25 42C25 32 32 25 40 25C45 25 48 27 50 30C52 27 55 25 60 25C68 25 75 32 75 42C75 60 50 75 50 75Z" fill="currentColor" opacity="0.3"/>
              </svg>
            </div>
            <div>
              <h2 class="text-3xl font-black gradient-text">MedMate Dashboard</h2>
              <p class="text-slate-600 mt-1" id="welcome-note"></p>
            </div>
          </div>
          <div class="flex flex-wrap gap-3">
            <span class="inline-flex items-center gap-2 bg-emerald-100 text-emerald-700 px-4 py-2.5 rounded-xl font-semibold">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
              </svg>
              AI Ready
            </span>
            <button id="logout-btn" class="inline-flex items-center gap-2 bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-2.5 rounded-xl font-semibold transition">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M7.5 3.75A1.5 1.5 0 006 5.25v13.5a1.5 1.5 0 001.5 1.5h6a1.5 1.5 0 001.5-1.5V15a.75.75 0 011.5 0v3.75a3 3 0 01-3 3h-6a3 3 0 01-3-3V5.25a3 3 0 013-3h6a3 3 0 013 3V9A.75.75 0 0113.5 9V5.25a1.5 1.5 0 00-1.5-1.5h-6zm10.72 4.72a.75.75 0 011.06 0l3 3a.75.75 0 010 1.06l-3 3a.75.75 0 11-1.06-1.06l1.72-1.72H9a.75.75 0 010-1.5h10.94l-1.72-1.72a.75.75 0 010-1.06z" clip-rule="evenodd" />
              </svg>
              Logout
            </button>
          </div>
        </header>

        <!-- Main Chat Interface -->
        <div class="bg-white/70 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden flex flex-col" style="height: calc(100vh - 200px);">
          <!-- Chat Header -->
          <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-cyan-50">
            <div>
              <h3 class="text-xl font-bold text-slate-900">üí¨ Chat with MedMate</h3>
              <p class="text-sm text-slate-600">‚ú® Powered by Google Gemini AI ‚Ä¢ Real-time Analysis</p>
            </div>
            <div class="flex items-center gap-2">
              <button id="clear-chat-btn" class="inline-flex items-center gap-2 bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-2 rounded-xl font-semibold transition transform hover:scale-105" title="Start new conversation">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                  <path fill-rule="evenodd" d="M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.256 1.478l-.209-.035-1.005 13.07a3 3 0 01-2.991 2.77H8.084a3 3 0 01-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 01-.256-1.478A48.567 48.567 0 017.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 013.369 0c1.603.051 2.815 1.387 2.815 2.951zm-6.136-1.452a51.196 51.196 0 013.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 00-6 0v-.113c0-.794.609-1.428 1.364-1.452zm-.355 5.945a.75.75 0 10-1.5.058l.347 9a.75.75 0 101.499-.058l-.346-9zm5.48.058a.75.75 0 10-1.498-.058l-.347 9a.75.75 0 001.5.058l.345-9z" clip-rule="evenodd" />
                </svg>
                Clear
              </button>
              <span id="model-status" class="text-xs font-semibold px-3 py-1.5 rounded-full bg-yellow-100 text-yellow-700">‚è≥ Loading AI...</span>
            </div>
          </div>

          <!-- Messages Area -->
          <div class="flex-1 overflow-y-auto px-6 py-4 space-y-4" id="chat-messages">
            <div class="flex items-start gap-3">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl flex-shrink-0 pulse-glow">ü§ñ</div>
              <div class="flex-1 bg-gradient-to-br from-purple-50 to-pink-50 border border-purple-100 rounded-2xl p-4 slide-in">
                <p class="text-slate-800 text-lg"><b>Hey there! üëã I'm MedMate, your personal health buddy!</b></p>
                <p class="mt-2 text-slate-700">I'm here to help you with:</p>
                <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                  <div class="bg-white/60 rounded-lg p-2">üíô <b>Mental Health</b></div>
                  <div class="bg-white/60 rounded-lg p-2">ü©∫ <b>Symptoms</b></div>
                  <div class="bg-white/60 rounded-lg p-2">üì∏ <b>Skin Analysis</b></div>
                  <div class="bg-white/60 rounded-lg p-2">üìã <b>Lab Reports</b></div>
                  <div class="bg-white/60 rounded-lg p-2">üë®‚Äç‚öïÔ∏è <b>Find Doctors</b></div>
                  <div class="bg-white/60 rounded-lg p-2">üè• <b>Hospitals</b></div>
                </div>
                <p class="mt-3 text-sm text-slate-600">üí¨ Just click a button below or type your question!</p>
                <p class="mt-2 text-xs text-red-600"><b>üö® Emergency? Call 108 immediately!</b></p>
              </div>
            </div>
          </div>

          <!-- Quick Actions Bar -->
          <div class="px-6 py-3 border-t border-slate-200 bg-slate-50/50">
            <div class="flex gap-2 overflow-x-auto pb-2">
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="therapist">üíô AI Therapist</button>
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="symptom">ü©∫ Symptom Check</button>
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="skin">üì∏ Skin Scan</button>
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="report">üìã Report Analysis</button>
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="doctor">üë®‚Äç‚öïÔ∏è Need Doctor</button>
              <button class="quick-action flex-shrink-0 px-4 py-2 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white rounded-xl font-semibold shadow-md transition transform hover:scale-105" data-action="hospital">üè• Hospitals</button>
            </div>
          </div>

          <!-- Input Area -->
          <form id="chat-form" class="px-6 py-4 border-t border-slate-200 flex items-center gap-3 bg-white">
            <input id="chat-input" type="text" placeholder="Type your message or question..." class="flex-1 border-2 border-slate-300 rounded-2xl px-5 py-3.5 text-base focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 transition" />
            <button type="submit" id="send-btn" class="bg-gradient-to-r from-indigo-600 to-cyan-600 hover:from-indigo-700 hover:to-cyan-700 text-white font-bold px-6 py-3.5 rounded-2xl shadow-lg transition transform hover:scale-105 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
              </svg>
              Send
            </button>
          </form>
        </div>
      </div>
    </section>

  </main>

  <script src="database.js"></script>
  <script src="firebase-config.js"></script>
  <script src="gemini-ai.js?v=60"></script>
  <script src="app-simple.js?v=70"></script>
</body>
</html>
